@page "/"

@rendermode InteractiveServer

@using EzeePdf.Core.Extensions
@using MudBlazor

@inject NavigationManager navigationManager
@inject ISettingsService settingsService
@inject IJSRuntime jsRuntime

<PageTitle>MzyDevs : Free PDF Watermark Tool | Online PDF Annotations | Image Editing</PageTitle>

<meta name="description" content="Use our free Image Editing, PDF watermark and PDF annotation service." />
<meta name="description" content="Image Editing: Convert, Crop, Rotate, Draw, Contrast, Brightness, Hue, Saturation, Opacity, Blur" />
<meta name="description" content="Watermark: Add image in background of a PDF" />
<meta name="description" content="Annotations: PDF highlight, underline, draw, add text, add notes" />


<MudPaper Class="d-flex justify-center align-center" Style="background-color:#1e1e1e">
    <MudContainer MaxWidth="MaxWidth.Medium">
        <br />
        <MudText Typo="Typo.h5" Align="Align.Center" Class="mb-6" Color="Color.Warning">
            PDF and Image Utility Suite
        </MudText>

        <MudText Typo="Typo.subtitle1" Align="Align.Center" Class="mb-8">
            Enhance, annotate, convert and personalize your PDFs and Images with professional tools.
        </MudText>

        <MudGrid Justify="Justify.Center">
            <!-- Annotation Feature -->
            <MudItem xs="12" sm="11">
                <MudCard Class="h-100">
                    <MudCardContent>
                        <MudText Typo="Typo.h6" Class="mb-2">
                            <MudIcon Size="Size.Small"
                                     Icon="@Icons.Material.Sharp.Draw" />&nbsp;&nbsp;Annotations
                        </MudText>
                        <MudText Typo="Typo.body2">
                            Highlight, underline, strike through, add notes, draw shapes, stamps, and measure with calibration tools.
                        </MudText>
                    </MudCardContent>
                    <MudCardActions Class="justify-between">
                        <MudButton Variant="Variant.Filled" Color="Color.Warning" OnClick="NavigateToEdit">
                            Try Now
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>

            <!-- Watermark Feature -->
            <MudItem xs="12" sm="11">
                <MudCard Class="h-100">
                    <MudCardContent>
                        <MudText Typo="Typo.h6" Class="mb-2">
                            <MudIcon Size="Size.Small"
                                     Icon="@Icons.Material.Sharp.WaterDrop" />&nbsp;&nbsp;Watermark
                        </MudText>
                        <MudText Typo="Typo.body2">
                            Add a watermark image to your PDF with adjustable opacity and margins.
                        </MudText>
                    </MudCardContent>
                    <MudCardActions Class="justify-between">
                        <MudButton Variant="Variant.Filled" Color="Color.Warning" OnClick="NavigateToWatermark">
                            Try Now
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>

            <!-- Image Edit Feature -->
            <MudItem xs="12" sm="11">
                <MudCard Class="h-100">
                    <MudCardContent>
                        <MudText Typo="Typo.h6" Class="mb-2">
                            <MudIcon Size="Size.Small"
                                     Icon="@Icons.Material.Sharp.Image" />&nbsp;&nbsp;Edit Image
                        </MudText>
                        <MudText Typo="Typo.body2">
                            Edit images, convert, crop, rotate, draw with adjustable opacity.
                        </MudText>
                    </MudCardContent>
                    <MudCardActions Class="justify-between">
                        <MudButton Variant="Variant.Filled" Color="Color.Warning" OnClick="NavigateToEditImage">
                            Try Now
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>

            <!-- PowerPoint to PDF Feature -->
            <MudItem xs="12" sm="11">
                <MudCard Class="h-100">
                    <MudCardContent>
                        <MudText Typo="Typo.h6" Class="mb-2">
                            <MudIcon Size="Size.Small"
                                     Icon="@Icons.Material.Sharp.Assignment" />&nbsp;&nbsp;PowerPoint to PDF
                        </MudText>
                        <MudText Typo="Typo.body2">
                            Convert a PowerPoint presentation into a PDF.
                        </MudText>
                    </MudCardContent>
                    <MudCardActions Class="justify-between">
                        <MudButton Variant="Variant.Filled" Color="Color.Warning" OnClick="NavigateToPowerPoint">
                            Try Now
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>

            <!-- Feedback Feature -->
            <MudItem xs="12" sm="11">
                <MudCard Class="h-100">
                    <MudCardContent>
                        <MudText Typo="Typo.h6" Class="mb-2">
                            <MudIcon Size="Size.Small"
                                     Icon="@Icons.Material.Sharp.InsertComment" />&nbsp;&nbsp;Feedback
                        </MudText>
                        <MudText Typo="Typo.body2">
                            Share your thoughts or report an issue.
                        </MudText>
                    </MudCardContent>
                    <MudCardActions Class="justify-between">
                        <MudButton Variant="Variant.Filled" Color="Color.Warning" OnClick="NavigateToFeedback">
                            Try Now
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>

            <!-- Limits -->
            <MudItem xs="12" sm="11">
                <MudCard Class="h-100">
                    <MudCardContent>
                        <MudText Typo="Typo.h6" Class="mb-2">
                            <MudIcon Size="Size.Small"
                                     Icon="@Icons.Material.Sharp.Lock" />&nbsp;&nbsp;Limits
                        </MudText>
                        <MudText Typo="Typo.body2">
                            <ul>
                                <li>Each feature can be used only once in @consecutiveFeatureUsageLimit minutes</li>
                                <li>Feedback can be submitted only once in @consecutiveFeedbackUsageLimit minutes</li>
                                <li>A PDF with a maximum of @maxPageCount pages can be uploaded</li>
                                <li>A PDF with a maximum size of @maxPdfUploadLimit MB can be uploaded</li>
                                <li>A Watermark with a maximum of @maxWatermarkUploadLimit KB can be uploaded</li>
                                <li>An Image (for edit) with a maximum of @maxImageUploadLimit MB can be uploaded</li>
                            </ul>
                        </MudText>
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
    </MudContainer>
</MudPaper>

@code {
    private int dailyPdfDownloadLimit;
    private string? maxPdfUploadLimit;
    private long maxWatermarkUploadLimit;
    private int consecutiveFeatureUsageLimit;
    private int consecutiveFeedbackUsageLimit;
    private int maxPageCount;
    private string? maxImageUploadLimit;

    private void NavigateToEdit()
    {
        navigationManager.NavigateTo("/pdf-tools/annotations");
    }
    private void NavigateToWatermark()
    {
        navigationManager.NavigateTo("/pdf-tools/watermark");
    }
    private void NavigateToEditImage()
    {
        navigationManager.NavigateTo("/img-tools/edit");
    }
    private void NavigateToPowerPoint()
    {
        navigationManager.NavigateTo("/pdf-tools/ppt2pdf");
    }

    private void NavigateToFeedback()
    {
        navigationManager.NavigateTo("/feedback");
    }
    private void NavigateTo(string route)
    {
        navigationManager.NavigateTo(route);
    }
    protected async override Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        var maxSize = await settingsService.PdfMaxFileSize();
        maxPdfUploadLimit = maxSize.BytesToMbWithDecimal("#0.00");
        maxSize = await settingsService.ImageMaxFileSize();
        maxImageUploadLimit = maxSize.BytesToMbWithDecimal("#0.00");
        maxPageCount = await settingsService.MaxAllowedPageCount();
        dailyPdfDownloadLimit = await settingsService.PdfDailyLimit();
        consecutiveFeatureUsageLimit = await settingsService.PdfConsecutiveFeatureUsageWait();
        consecutiveFeedbackUsageLimit = await settingsService.PdfConsecutiveFeedbackWait();
        maxSize = await settingsService.WatermarkImageMaxSize();
        maxWatermarkUploadLimit = maxSize.BytesToKb();
    }
}